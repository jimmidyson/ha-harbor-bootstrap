expose:
  type: loadBalancer
  loadBalancer:
    IP: "${HARBOR_EXTERNAL_IP}"
  tls:
    enabled: false

externalURL: "http://harbor.${HARBOR_EXTERNAL_IP}.sslip.io"

nginx:
  replicas: 3
portal:
  replicas: 3
core:
  replicas: 3
jobservice:
  replicas: 3
registry:
  replicas: 3


persistence:
  persistentVolumeClaim:
    registry:
      accessMode: ReadWriteMany
      size: 1Gi
    jobservice:
      jobLog:
        accessMode: ReadWriteMany
        size: 1Gi
    trivy:
      accessMode: ReadWriteMany
  imageChartStorage:
    disableredirect: true
    type: filesystem

database:
  type: external
  external:
    host: "harbor-database-cluster-rw"
    port: "5432"
    username: "harbor"
    coreDatabase: "harbor"
    existingSecret: "harbor-database-cluster-app"

redis:
  type: external
  external:
    addr: "harbor-keydb-replica:6379"
    # The "coreDatabaseIndex" must be "0" as the library Harbor
    # used doesn't support configuring it
    # harborDatabaseIndex defaults to "0", but it can be configured to "6", this config is optional
    # cacheLayerDatabaseIndex defaults to "0", but it can be configured to "7", this config is optional
    coreDatabaseIndex: "0"
    jobserviceDatabaseIndex: "1"
    registryDatabaseIndex: "2"
    trivyAdapterIndex: "5"
    # harborDatabaseIndex: "6"
    # cacheLayerDatabaseIndex: "7"
    # username field can be an empty string, and it will be authenticated against the default user
    username: ""
    password: "${HARBOR_REDIS_PASSWORD}"
